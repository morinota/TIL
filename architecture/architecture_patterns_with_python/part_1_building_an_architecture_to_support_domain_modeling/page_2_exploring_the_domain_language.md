## Exploring the Domain Language

- ドメインモデルを理解するには、時間と忍耐とポストイット・ノートが必要です。私たちは、ビジネスエキスパートと最初に話し合い、ドメインモデルの最初の最小バージョンのための用語集といくつかのルールに合意します。可能な限り、各ルールを説明するための具体例を求めます。

- これらのルールは、必ずビジネスの専門用語（DDD用語のユビキタス言語）で表現します。オブジェクトには覚えやすい識別子を選び、例を話しやすくしています。

- "[Some Notes on Allocation](https://learning.oreilly.com/library/view/architecture-patterns-with/9781492052197/ch01.html#allocation_notes)"は、割り当てについてドメインエキスパートと会話したときに取ったであろうメモをいくつか示しています。

### Some Notes on Allocation

SKUとは、Stock-Keeping Unitの略で、「スキュー」と発音され、商品を識別する。顧客は注文をする。注文は注文参照番号で識別され、複数の注文行から構成され、各行にはSKUと数量がある。例えば

- 10 units of RED-CHAIR
- 1 unit of TASTELESS-LAMP

購買部門は、小ロットの在庫を発注する。在庫のバッチは、リファレンスと呼ばれる一意のID、SKU、および数量を持っています。

バッチに注文書を割り当てる必要があります。バッチにオーダーラインを割り当てると、そのバッチから顧客の配送先に在庫を送ることになる。バッチに x 個の在庫を割り当てると、使用可能な数量が x 個減ります。たとえば、次のようになります。

- SMALL-TABLE 20個のバッチがあり、SMALL-TABLE 2個分のオーダーラインを割り当てています。
- バッチには18個のSMALL-TABLEが残っているはずです。

使用可能な数量が注文行の数量より少ない場合、バッチに割り当てることができません。例えば

- BLUE-CUSHIONは、1台分のロットと2台分のオーダーラインがあります。
- バッチに回線を割り当てることはできないはずです。

同じ行を2回割り当てることはできません。例えば

- BLUE-VASEのロットが10個あり、BLUE-VASEの受注ラインを2個分確保しました。
- この注文書を同じバッチに再度割り当てると、そのバッチの利用可能数量は8個のままとなるはずです。

バッチには、現在出荷中の場合はETAが表示され、また、倉庫の在庫にある場合もあります。出荷バッチよりも倉庫在庫に優先的に割り当てます。出荷バッチは、ETAが早いものから順に割り当てる。
