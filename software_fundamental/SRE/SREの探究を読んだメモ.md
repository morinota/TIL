## これは何?

- SREの探求を読んだメモ
- 経緯: MLOpsの処方箋本が、SREの探求のMLOps版らしいので、こっちも読んでみたいと思った

## 参考文献

- 7章の話! [SREの探究 - Spotifyの事例：Ops-in-Squads](https://future-architect.github.io/articles/20221107a/)

## 前提知識を調べたメモ

- SRE(Site Reliability Engineering)とは?
  - 「**大規模なシステムの信頼性（Reliability）を維持・向上させるためのエンジニアリング手法**」のこと。
    - (MLOps処方箋本におけるMLOpsの定義が「機械学習の成果をスケールさせるための様々な取り組み」であることを考えると、SREの定義も「**大規模システムの信頼性を維持・向上させるための様々な取り組み**」と言っていいのかも...??:thinking:)
  - 元々はGoogleが提唱した概念で、「**サービスの信頼性をソフトウェアエンジニアリングの力で高めていこうぜ！**」というアイデアが根本にある。
- SREのモチベーション
  - **システムの可用性（Availability）**を維持・向上させる
  - **自動化（Automation）**を進めて、運用負荷（Toil）を減らす
    - Toil: 重要でない作業、繰り返しの作業、人手で行うべきでない作業。
  - **インシデント対応（Incident Management）**を改善し、障害を迅速に復旧する
  - **継続的な改善（Continuous Improvement）**によってシステムの安定性を高める

## 1章: 2分類のSREアプローチ: コンテキスト提供型 vs コントロール型

- この章では、SREのアプローチを大きく「**コンテキスト提供型**」と「**コントロール型**」の2種類に分類してる。

### コンテキスト提供型 vs コントロール型

- コンテキスト提供型
  - NetflixのSREでは、**エンジニアリングチームにコンテキストを提供し、適切な判断を促す**方法を採用。
    - ex. マイクロサービスごとの可用性情報や、それが目標値とどう関係しているかのデータをエンジニアに共有。それによって、**各チームは自律的に可用性向上のための行動を取ることができる**。
  - 問題発生時には「**各チームが適切な判断をするためのコンテキストが不足していたか？**」を振り返る。
- コントロール型
  - 一方で、コントロール型のモデルでは 「**ルールや制約を設けて可用性を維持**」しようとする。
    - ex. 可用性の目標を達成できなかったチームに対して コードのデプロイ権限を停止 するなどのペナルティがある。
  - これは一見有効だが、**罰則によるプレッシャー**によりイノベーションが阻害される可能性がある。

### コンテキスト提供型アプローチのメリット

- NetflixのSREでは、**コンテキストを提供することでエンジニアが自律的に判断できる環境 を作ることが成功の鍵になった**、と主張されてる。

### コンテキスト提供が逆効果になることはあるか?

- コンテキスト提供が間違った方向に働く場合、 **過剰なコスト削減を狙って信頼性を犠牲にする**ことがある。
  - ex.) あるチームが **古いインスタンスを使い続けてコストを削減**しようとした結果、システムの信頼性が大幅に低下し障害につながった。
- このような事態を防ぐために、Netflixでは **「信頼性を最優先にする」という基本原則を明確化** してるらしい。
  - (推薦システムのMLOpsにて、「A/Bテストしやすいシステムであること」を必須事項として明確化するのと近いな...!:thinking:)

### コントロールが必要なケース

- 一方で、コントロールが必要な場合もあると主張されてる。
  - ケース1: 高リスクな環境
    - ex. 航空機のオートパイロットや医療機器のソフトウェア など、**人命に関わるシステムでは、コンテキスト提供だけでは不十分で、厳格なルール（コントロール）を設ける必要がある**。
  - ケース2: 大規模な組織
    - 組織が大きくなるほど、チーム間のコミュニケーションが減るため、**コンテキストを適切に提供するのが難しくなる**。
    - Netflixのような、**単一キャンパスでエンジニアが働いている環境ではコンテキスト提供型アプローチが機能する**が、**グローバル企業ではコントロール型のプロセスが不可欠**になり得る。

### まとめ

- Netflixでは、コンテキスト提供型のSREを採用し、エンジニアの自律的な意思決定を促している
- 厳しいコントロールよりも、適切な情報を提供することで可用性を向上
- ただし、すべての環境に適用できるわけではなく、人命に関わるシステムや大規模組織ではコントロールも必要
- 組織ごとに「コンテキスト」と「コントロール」の適切なバランスを見つけることが重要

## 2章: SREsの採用の話

- 一旦飛ばす!

## 3章: SREチームを新しく立ち上げるときの話

### SREチームを作る前に考えるべきこと

### SREはデータ駆動型アプローチが必須

### SREを成功させるためのコミットメント

### SREを導入するかどうかの意思決定

### まとめ

## 4章: インシデント(障害)のメトリクスを用いたSREの大規模な改善

### インシデント対策の「好循環」を作る

### インシデントのmetricsを活用する

### metricsをどのように使うか?

## 5章: サードパーティ(外部サービスやベンダー)との連携の重要性

## 6章: SRE専任チームを持たずに、どうやってSREの考え方を組織に適用するか？


