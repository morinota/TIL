## これは何

- Github actionsを雰囲気で使ってたので、ざっくり調査します

## refs

- [GitHub Actions ドキュメント](https://docs.github.com/ja/actions)

## GitHub Actionsの概要

- ビルド、テスト、デプロイのパイプラインを自動化できる**継続的インテグレーションと継続的デリバリー (CI/CD) のためのプラットフォーム**。
  - リポジトリに対するすべての pull request をビルドしてテストしたり、マージされた pull request を運用環境にデプロイしたりするワークフローを作成できる。(うんうん、認識あってる...!)
- 実行されるインスタンス。
  - Github actionsのワークフローの実行には、**Linux、Windows、macOS の仮想マシンが提供**される。(後述されるRunnerという概念!)
  - もしくは、自社のクラウドインフラなどで独自のself-hostされたインスタンスを使うこともできる。

## Github Actionsにおける概念(コンポーネント)たち

- 4つの概念(コンポーネント)が出てくる
  - ワークフロー
  - イベント
  - ジョブ
  - アクション
  - ランナー

### ワークフロー

- 1つ以上のジョブで構成される自動化プロレス。
- リポジトリ内の `.github/workflows` ディレクトリ内のyamlファイルによって定義される。
- リポジトリ内のイベントによってトリガーされる。
- また、**手動でトリガーしたり、指定されたスケジュールでトリガー**することもできる。(あ、そうなのか...!:thinking:)
- **1つのリポジトリ内で複数のワークフローを定義できる**。
  - あるワークフローから別のワークフローを参照することもできるっぽい??

### イベント

- ワークフロー実行をトリガーする、リポジトリ内の特定のactivity。
  - ex. PR作成時、issue作成時、リポジトリにcommitがpushされた時、など。
  - [トリガー可能なイベント一覧](https://docs.github.com/ja/actions/writing-workflows/choosing-when-your-workflow-runs/events-that-trigger-workflows)

### ジョブ

- 同じランナーで実行される、ワークフロー内の一連のステップ(**じゃあジョブはステップ集合ってことか!**)。
  - 各ステップは、シェルスクリプト、またはアクション(後述)のいずれか。
- **同じジョブ内の各ステップは同じランナー(i.e. インスタンス?)で実行されるため、あるステップから別のステップにデータを共有できる**。
  - ex. アプリをビルドするステップの後に、ビルドされたアプリをテストするステップを繋げられる。
    - **データを共有させたい場合は、同じジョブに両ステップを含める必要があるってことか**...!:thinking:
- 必要に応じて、ジョブ間に依存関係を持たせられる。
  - **デフォルトでは、ジョブ間に依存関係はなく、並列で実行される**。(あ、じゃあ別ランナーで実行されるのか...!:thinking:)
  - あるジョブBが別のジョブAに依存する場合、ジョブBはジョブAの完了後に実行される。
  - 並列と直列を混ぜたりもあり!
    - ex.) まず複数のビルドジョブを並列で実行して、それらのジョブ達に依存するパッケージ化ジョブを実行する。
  
### アクション

- GitHub Actions専用のカスタムアプリケーション。ジョブの中身として指定できる。
  - たぶんutils的な処理をわざわざコード書かなくて済むように、GitHubがwrapperを提供してくれてるやつ...! :thinking:
- 独自のアクションを記述することも、GitHub Marketplaceからアクションを見つけることもできる。

### ランナー

- ワークフローがトリガーされると起動するサーバー(i.e. リソース?)
  - 各ワークフロー実行は、新しくプロビジョニングされた仮想マシンで実行される。
- **各ランナーは一度に1つのジョブを実行する**。(not 1つのワークフロー...!)
  - 並列の2つのジョブを持つワークフローは、2つのランナーで実行されるってこと?? :thinking:
