# イントロ・計算量を考える動機

# 定義(+おきもち)：

## 計算量

- 上の例で触れたとおり、アルゴリズムが行った処理のコストの総和を時間計算量(Time Complexity)と呼ぶ
  - 時間計算量は入力サイズnの関数として記述される事が多いが、実際には、入力サイズnのみでは決まらず、入力自体によって変わる事が多い。
    - 最も時間計算量が小さくなるような入力における時間計算量を最良時間計算量(Best-case Time Complexity)、最も大きくなるような入力におけるそれを最悪時間計算量(Worst-case Time Complexity)と呼ぶ。
    - 当然、それ以外の入力における時間計算量は、裁量時間計算量以上、最悪時間計算量以下となる。
- アルゴリズム中で使用したメモリの量を指して、空間計算量(Space Complexity)と呼ばれるものもある。
  - 単に計算量（Complexity）と呼ぶ場合は時間計算量を指す事が多いが、実際には、時間や空間以外の計算リソースを指す文脈もあるかも…!(ex. 必要となる回路の個数とか？)
- 使いどころ：
  - 「計算量は最悪時でもこれ以下ですよ～」「計算量は最良時にはこれ以下になりますよ～」という評価の他、敵（？）のアルゴリズムに対して「それは最悪時にはこれ以上になっちゃいますよ～」という評価もする。

## オーダー

- さて、入力サイズnの関数として計算量は記述されるが、文中で「これこれのソートの計算量は5n^2−5/2 n+4であり～」等と言いたくなる状況はあまりない。
  - ＝＞支配項のみに着目して「支配項はn^2 の定数倍です」といった旨の主張のみで事足りる事も多い。
- どっちの改善が嬉しい??
  - 5n^2⇒4n^2 (支配項の定数倍を落とす)
  - 5n^2⇒100n(支配項の"増加度合い"を落とす)
  - 前者の改善では、改善後も「nが10倍になれば計算量は(被支配項を無視して)100倍になる」という状況に変化はない。
  - 後者の改善では、「nが10倍になっても計算量は10倍にしかならない」という状況になっている.
- 上記の"増加度合い"の事を、単にオーダー(Order of Growth)と呼ぶ。
  - 支配項の定数倍の削減や非支配項の改善よりも、支配項の増加度合い(=オーダー)の削減の方が嬉しい…!
- オーダーの数学的な定義は以下に後述。

## Θ記法(theta)：

- 「f(n)のオーダーは、g(n)である」とは、次の条件が成り立つ事とする。
  - ある定数n_0を固定する。これに対し、ある定数$c_L,c_U>0$が存在し、n_0以上の全てのnについて次の式が成り立つ：
    - $0≤c_L × g(n)≤f(n)≤c_U × g(n)$
  - 直感的に言い換えれば、「十分大きいnに対して、g(n)の定数倍でf(n)をサンドイッチできる」ということ。
    - サンドイッチできるのであれば、同じような増加度合いでしょうね、といったような気持ち。
- f(n)のオーダーがg(n)である事を、f(n)∈Θ(g(n))と書く。
  - シータと読む。
  - $\Theta (g(n))$：オーダーがg(n)である様な関数の集合。
  - ex)以下が成り立つ。
    - $n^2 + 3n \in \Theta (n^2)$
    - $n^2 \notin \Theta (n^3)$
    - $\Theta (2n) = \Theta(n+1) = \Theta(n)$
  - 長ったらしい関数の支配項のみに注目する為にΘを使うので、わざわざΘ(n^2+3n+1)等と表記する事は滅多にないが、記法自体は誤りではない。
- Θの言い回しについて：
  - Θは計算量のみについて用いる記法ではなく、関数一般に対して用いる事ができる記法。

## O記法(big-O)：

- 一方で「最悪時でも計算量はここまでしか悪くならない」という事を示したい時に、わざわざサンドイッチする必要はない。
  - 上からだけ抑えて、$0 \leq f(n) \leq c_U \cdot g(n)$とさえ言ってしまえば十分。
  - それを表す記法がO

以下が成り立つ時、$f(n)\in O(g(n))$と書き、f(n)**はたかだか(＝最大でも**)g(n)のオーダーであると言う。

> ある定数$n_0$を固定する。これに対し、ある定数$c_u>0$が存在し、$n_0$以上の全てのnについて次の式が成り立つ。
> $0 \leq f(n) \leq c_U \cdot g(n)$

- 例えば次の式が成り立つ。
  - $n^2 + 3n \in O(n^2)$
  - $n^2 \in O (n^3)$
  - $n^4 \notin O (n^3)$
  - $O(2n) = O(n+1) = O(n)$
- $n^2 \in O (n^3)$に違和感を感じる人は、落ち着いて包含関係をいくつか書いて見て欲しい...!
  -

## Ω記法(big-Omega)：

- 逆に、下から抑えたい局面もある。
  - 「既存のアルゴリズムのオーダーは、**少なくとも**$n^3$なので、自分の$O(n^2)$の方が優れている」という形でしたい...!
  - O記法は"**最大でも**"って意味合い。

以下が成り立つ時、$f(n)\in \Omega(g(n))$とかき、$f(n)$は**少なくとも**g(n)のオーダーであると言う。
>ある定数$n_0$を固定する。これに対し、ある定数$c_L>0$が存在し、$n_0$以上の全てのnについて、次の式が成り立つ：
> $0\leq c_L \cdot g(n) \leq f(n)$

- 「これこれのアルゴリズムは O(f(n)) 時間です」と言ったとき、**worst case で O(f(n)) 時間**と解釈される。
- 一方で、「これこれのアルゴリズムは Ω(f(n)) 時間です」と言ったとき、**best case でもΩ(f(n)) 時間**だと解釈される。

## o記法(little-o)：
- ある関数に対して、「この関数はそれよりもオーダーが真に小さいぞー」というのを言いたいことはある。
  - 「T(n)T(n) 時間のアルゴリズムを知っているが、それよりもオーダーを改善できるのか？」といった状況など
- その為の記法がlittle-o

以下が成り立つ時、$f(n)\in o(g(n)) $と書ける。
> **任意の**$c_U > 0 $に対して、あるn_0が存在し、n_0以上の全てのnについて次の式が成り立つ:
> $0 \leq f(n) \leq c_U \cdot g(n)$

- Oではある$c_U$に対して抑えれば良かったが、oでは任意の$c_U$に対して抑える必要がある。
- 例えば、次の式が成りたつ。
  - $n^2 \in 0(n^3)$
  - $n^2+3n \notin o(n^2)$
  - $n^4 \notin o(n^3)$
  - $o(2n) = o(n+1) = o(n)$

## ω記法(litte-omega)：
- 逆に、「真に大きいぞー」というのを示したいときには $\omega$ を使う。
  - 「このアルゴリズムは $T(n)$ 時間だが、既存のは $\omega(T(n))$ 時間なので、改善したぞー」といった具合。

- 以下が成り立つ時、$f(n)\in \omega(g(n))$と書く。
  - 任意のc_L>0に対して、あるn_0が存在し、n_0以上の全てのnについて次の式が成り立つ：
    - $0 \leq c_L\cdot g(n) \leq f(n)$
- 例えば、以下の式が成り立つ。
  - $n^2 \notin \omega(n^3)$
  - $n^2+3n \notin \omega(n^2)$
  - $n^4 \in \omega(n^3)$
  - $\omega(2n) = \omega(n+1) = \omega(n)$


# 参考

- できるだけ嘘を書かずに計算量やオーダーの説明をしようとした記事
  - https://rsk0315.hatenablog.com/entry/2021/10/13/235627
