## これは何?

- 2025/03/06 の #さくらのAI Meetup vol.8「MLOpsを学ぼう」の発表資料の下書きです。
  - イベントリンク: https://sakura-tokyo.connpass.com/event/345101/


## 下書き

- タイトル案: 
  - 「NewsPicksで機械学習による推薦システムの成果をスケールさせるために取り組んできたこと (ver. 2025春)」
  - 「NewsPicksにおけるMLOps(ver.2025春) ~機械学習による推薦システムの成果をスケールさせるために取り組んできたこと~」
  - 「NewsPicksで機械学習による推薦システムの成果をスケールさせるために重視している観点 & 今後重視していく観点」

- アウトライン(発表20分)
  - 導入
    - 自己紹介
    - NewsPicksの紹介
    - NewsPicksにおける機械学習の活用例の紹介
      - 主にコンテンツの推薦、検索、LLMによるメタデータ拡張、AIサマリなどをラフに紹介??
      - その上で、本発表では非LLMのMLを活用している推薦システム周りについて話す、ことを共有。
        - ただ今のロジックではリアクションデータを元にパラメータ更新はしない判断をとっている、ことも共有しておく。
    - 本発表における「MLOps」の定義。なぜ今日このトピックを発表するのか?
      - 書籍「MLOpsの処方箋」の定義を引用して「MLOps」の定義について認識を合わせる。
        - 「**ビジネスで機械学習の成果をスケールさせるための様々な取り組み**」
      - 本発表では、NewsPicksの推薦システムにおけるMLOpsの取り組みを大きく2つ紹介し、今後の課題感ややっていくことについても共有する。
  <!-- - NewsPicksにおける推薦システムはこんな感じ
    - Two-Towerモデルの紹介
    - FTI Pipelinesアーキテクチャの紹介
    - バッチ推論とリアルタイム推論の使い分けの紹介
      - ちなみに...この意思決定もMLOpsの一種と言って良いはず。
      - 「機械学習システムデザイン」や「MLOpsの処方箋」の記述を引用しつつ、推論パターンの分類や特徴について、軽く共有する
    - その上で、推薦システムの場合は両方の推論パターンを選択できること。そしてNPでは記事/コメントなどの推薦にはリアルタイム推論、動画コンテンツなどの推薦にはバッチ推薦を選ぶこと。その意思決定の理由などを言語化して共有。
  - 推薦システムのA/Bテストしやすいシステム -->
  - **MLOps実践例1: 新しい推薦モデルをより速く/簡単にA/Bテストできる世界へ近づくための試み**
    - NPにて推薦システム領域でMLの成果をスケールさせるために必須事項だと考えていること「A/Bテストしやすいシステムであること」について共有。
      - (ここは以前のRecIndTalksの発表内容を少し短めに共有する!)
    - 推薦モデルはTwo-Towerモデル的なアーキテクチャを採用してるケースが多いこと。
    - FTI Pipelinesアーキテクチャの話。
    - 全く新しい推薦モデルをより速く/簡単にA/Bテストできる世界へ近づくための試み
      - MLOpsの技術的負債論文における「機械学習システムの健全性を評価する上で有効な質問5つ」のうちの2つを紹介。
      - ↑を踏まえて、MLパイプラインの生やし方の改善の試みの話
  - **MLOps実践例2: バッチ/リアルタイム推論の使い分け**
    - 経験:
      - 元々リアルタイム推論だった仕組みを、金銭的&運用コストの問題・開発改善しやすさの観点から、バッチ推論に変更しようと考えた。しかし、推論結果を使用するプロダクト機能の要件を踏まえて再議論し、リアルタイム推論は維持することにした話。
    - その上で、推薦システムの場合は両方の推論パターンを選択できること。そしてNPでは記事/コメントなどの推薦にはリアルタイム推論、動画コンテンツなどの推薦にはバッチ推薦を選ぶこと。その意思決定の理由などを言語化して共有。
  - 現在の課題感、今後やっていこうとしてること。
    - 1つ目: 速報ニュースやコメントを最速でユーザにお勧めできる世界へ! 特徴量生成のストリーミングパイプラインの導入の話。
      - 「機械学習システムデザイン」の記述を引用しつつ、バッチ特徴量とストリーミング特徴量の分類や特徴を紹介。
      - その上で、NPでは「速報ニュースやそれに対するコメントをより最速でユーザに推薦できる世界を目指すべき」と判断。よって、リアルタイム推論による推薦結果作成に加えて、ニュース特徴量生成をバッチではなくストリーミングパイプラインでも実現できるようにする。
      - ここで、A/Bテストしやすさを維持すること、バッチ/ストリーミングパイプライン間の特徴量作成の整合性を保つこと、も紹介する。
    - 2つ目: A/Bテストしやすさだけではおそらく不十分。「継続的な訓練(Continuous Training)」を前提とした推薦システムにより、継続的改善を果たしたい話。
      - MLOpsにおける「継続的な訓練」の重要性について主張。
        - 「継続的な訓練」は、DevOpsの原則の一つである「継続的な改善(Continuous Improvement)」のMLOpsにおける実装である、という解釈。
        - よって、ただ「学習を自動化して定期的に実行する」ということではなく、機械学習サービスの価値を継続的に向上させるために非常に重要な要素。
      - MLOpsにおける「継続的な訓練」を正しく機能させるためにも、オフライン評価&学習という技術が重要であること。
        - よって継続的な訓練による性能改善を実現するために、確率的な推薦方策を導入する予定。
