# 参考

- https://bellcurve.jp/statistics/course/12744.html

# フィッシャーの三原則とは

- 実験を行う際には実験計画を立てる必要がある。
- 実験計画とは、よい結果を得るために最も効果的な実験を計画し、その実験で得られたデータに対して最適な解析手法を採択する手順のこと
- 実験計画を立てずに闇雲に実験を行ってしまうと、お金や時間や労力がかかってしまうだけではなく、信頼できる結果が得られない可能性がある
- そのため、R.A. Fisherがこの実験計画法に関して3つの原則を確立した。
  - この原則は次の3つから成る。
  - 反復(Replication)
  - 無作為化(Randomization)
  - 局所管理(Local Control)

# 反復(Replication)

- 複数の処理を比較する際に、それぞれの処理に対して**同じ条件で2回以上の繰り返し実験（評価）を行う**こと
  - 1回の測定では、測定値に違いがあっても「系統誤差（処理の違いによる差）」なのか、それとも「偶然誤差（たまたま生じる誤差）」なのかは判断できない。
  - 反復実験を行って偶然誤差のばらつきが分かれば真の平均のとりうる範囲を推測でき、この範囲よりも系統誤差が大きければ処理によって違いがあるという判断ができる
- ＝＞つまり**反復によって、偶然誤差の大きさを評価することができる**

- ex)
  - 比較したい処理がA、B、Cの3つあり、1日に6回の実験ができる場合、「反復」は3日間で各処理を6回ずつ行うことを指す。
  - | \\   | 1日目  | 2日目  | 3日目  |
    | ---- | ------ | ------ | ------ |
    | 処理 | AAAAAA | BBBBBB | CCCCCC |

# 無作為化(Randomization)

- 実験の順序や場所などが複数ある場合に、**比較したい処理群を無作為に（ランダムに）割り付ける**こと
  - **目的とする要因以外に結果に影響を与える要因がある場合に、無作為化によってその影響の偏りをできるだけ小さくする**ことができる。
- ＝＞つまり**無作為化によって、系統誤差を偶然誤差に取り込むことができる**
- ex)
  - 無作為化」はA、B、Cの処理を行う順番をランダムに割り付けることを指す。
  - | \\   | 1日目  | 2日目  | 3日目  |
    | ---- | ------ | ------ | ------ |
    | 処理 | ACCBAA | CBABBC | BABCCA |

# 局所管理(Local Control)

- 実験を行う時間や場所を区切ってブロックを作り、そのブロック内での**バックグラウンドができるだけ均一になるように**管理すること
- ＝＞**局所管理により系統誤差を小さくする**ことができる。
- | \\           | 1日目 | 2日目 | 3日目 |
  | ------------ | ----- | ----- | ----- |
  | 処理（午前） | ACC   | CBA   | BAB   |
  | 処理（午後） | BAA   | BBC   | CCA   |

# 乱塊法

- フィッシャーの3原則である「反復」と「無作為化」に加えて「局所管理」も盛り込んだ実験デザインを「乱塊法」という。
- 乱塊法とは、実験計画において**実験全体を無作為化するのではなく**、**局所管理の考えに基づくブロック内に1セットの実験を集めて無作為化**を行う方法のこと。
- ex)
  - | \\           | 1日目 | 2日目 | 3日目 |
    | ------------ | ----- | ----- | ----- |
    | 処理（午前） | ACB   | CBA   | CAB   |
    | 処理（午後） | BAC   | BAC   | CBA   |

# 例題

## 2-1 フィッシャーの三原則

適切な実験計画をたてるため、フィッシャーの三原則（反復、無作為化、局所管理）に基づいてRCTになるようABテストを行う事にしました。
以下の選択肢から適切なもの全て選んでください。

### 選択肢：2-1-choiceに解答

1. 実験を反復させるため、ABテスト実施期間の前半で対照群のデータを取得し、後半で介入群で実験した => 無作為化✗
2. 時間帯や曜日効果による系統誤差を考慮した局所管理のため、1日だけではなく2週間に渡ってABテストを実施した（1日も2週間も同じサンプルサイズになるよう適切に調整できているものとする）=> 反復○
3. 反復によってユーザーによる偶然誤差をなくすため、過去予約回数の多いユーザーを対照群、過去予約回数の少ないユーザーを介入群に配置した => 無作為性✗
4. 局所管理のため、過去履歴から過去予約回数が同程度のユーザーのみを選出してABテストを行った=> 局所管理○
5. 登録順に1からインクリメントされ発行されるユーザーIDがあるとする。無作為化のため、奇数のユーザーIDを持つユーザーを対照群、偶数のユーザーIDを持つユーザーを介入群に配置した => 無作為化△ 
6. 無作為化のため、10日間行うABテストの奇数日を対照群、偶数日を介入群としてABテストを行った => ○
