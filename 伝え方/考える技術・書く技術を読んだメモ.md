## これは何??

- 「入門 考える技術・書く技術」を読んだメモです!

## 序章

## 1章メモ: 読み手の関心・疑問に向かって書く！　~OPQ分析で読み手の疑問を明らかにする~

- Q: 読み手が複数いる場合はどうする??
  - 前提として、読み手の疑問に向かって書くのが説得力のある文書を書くための基本。
    - また厳密には、読み手の疑問は一人一人異なる。
  - TODO: 後で書く!
  - とにかく大切なのは「読み手が誰か」を考えること!

## 2章メモ: 考えを形にする ~メッセージを絞り、グループ化する「ピラミッドの基本」~

いい感じの文章を書くためには、まず**書き手自身の手で考えの構造を整理しておく**必要がある!

### 一度に覚えられる数には限界がある!

- 本書での言葉の定義
  - 「メッセージ」: 読み手に伝えようとしてる考え
  - 「主メッセージ」: その文書で最も伝えたいメッセージ。    
- OPQ分析に関連して、読み手の疑問(Q)に対する直接の答え(A)を主メッセージとする。さてその時、読み手は主メッセージを読んだだけですぐに納得してくれるだろうか??
  - おそらく納得しない! 大抵の場合「なぜそんなことが言えるのか?」「具体的にはどうすれば良いのか?」など更なる疑問を持つはず...!
- 主メッセージの判断根拠を10個列挙してみても読み手は混乱する。なぜなら**根拠の数が多すぎるために、すぐに全体を理解できないから!**
  - 論理学者アリストテレスの言葉: 
    - 「何かを認識するとき、ぼくたちは物事を様々なグループやカテゴリーに仕分けする。……（中略）……牛は牛舎に、馬は厩に、豚は豚小屋に、鶏は鳥屋に入れる。……（中略）……これと同じことを、ぼくたちは頭のなかでもしているんだよ」
  - アメリカの認知心理学者ジョージミラーの論文「マジックナンバー7、プラス/マイナス2」:
    - 「**人間が短期記憶できる考えの数は７±２（すなわち、５～９）である**」
    - ちなみに、ライティングの世界では安全を取り、**下限である「５」を限界の数とするのが一般的**らしい...!
- どうすれば読み手の負担を減らせる??
  - 情報の受け取り手の頭の中は、内容を理解するために受け取った多くの情報をグループ化(パターン化)し、理解可能な考えの中に収めようとする。それならば、**発信者が予め情報をグループ化して伝えれば、読み手の負担はグッと減るはず**...!
    - 

### メッセージ構造をそのまま文書へ!

### グループ化を行い要約メッセージを作る!

### メッセージが一般論にならないようにする!

### 要約メッセージを文章にするときの「4つの鉄則」

- 鉄則1: 名詞表現、体言止めは使用禁止とする
- 鉄則2: 「あいまい言葉」は使用禁止とする
- 鉄則3: メッセージはただ一つの文章で表現する
- 鉄則4: 「しりてが」接続詞は使用禁止とする

### 「So What?」を繰り返す!

## 3章メモ: ピラミッドを作る~ロジックを展開する、チェックする~

### 帰納法でロジックを展開する

- 帰納法の仕組み
- 「同じ種類の考え」を前提とする!
- 帰納法は「つなぎ言葉」でチェックする!
- 結論を先に述べる!

### 演繹法でロジックを展開する

### ピラミッド作成のコツ!

#### コツ1: 一つの考えを短く明快に!

- ピラミッド箱内で記入するメッセージは短く明快にしておくと以下の点でメリットがある!
  - 縦横のメッセージの関係が見えやすくなる!
  - おかしなメッセージに気づきやすくなる!
- メッセージを書く際には、前述された要約メッセージの4つの鉄則を意識するとよい...!

- 注意ポイント2つ
  - **主メッセージとキーライン(=主メッセージを支持するサブメッセージ)は早い時点で決める!** 仮で良いので!「大枠から詳細へ」がピラミッド作りの基本!
  - **ピラミッド内で文書を書こうとしてはいけない!**
    - 「文書を書くプロセス」と「考えを組み立てるプロセス」を分けるのがピラミッド原則の最大の特徴...！
    - ピラミッド内に書くのは「1つのメッセージ」である! この段階では文書を書くことは忘れて、**考えを組み立てることに集中**するべき！


#### コツ2: 縦と横の「二次元」を意識する!
#### コツ

## まずOPQ分析  

OPQ分析で読み手の関心・疑問を整理してみる。

- Objective(望ましい状況): 
  - Text2SQLアプリケーションが実現され、社内のデータ分析が効率化・高速化・標準化・民主化されていること。
    - より具体的には、アナリスト&エンジニアの分析業務が効率化・高速化されること。また、普段分析業務に関わらない人でも簡単に分析ができるようになること(民主化、標準化)。
- Problem(問題, 現状とObjectiveとのギャップ):
  - LLMは一定普及したが、社内のデータ分析業務は依然としてアナリスト&エンジニアの手作業に依存している。データ分析の知識は属人化している。
    - 「どこにどんなデータがあるか?」という知識、A/Bテストの効果検証方法などの統計的な知識、etc.
- Question(読み手の疑問): 
  - どうしたらText2SQLを社内に導入して、それが価値を発揮し、社内のデータ分析業務を効率化・高速化・標準化・民主化できるのか?? なぜまだ導入できてないのか??
      
## 主メッセージを考えてみる!

主メッセージは、読み手のQに直接答えている必要がある。

- 主メッセージ: 価値を発揮するText2SQLアプリケーションを作るには...
  - 1. クエリ実行履歴とContext Constructionの仕組みさえあれば一定品質は担保できそうなので、テーブルメタデータが整備されてなくても果敢に導入していきましょう！
  - 2. より価値を発揮するにはワークフロー制御が必要そうです！

とりあえず2つメッセージが出てきてしまってるが、一旦OKとみなして、次に行こう。
この2つの主メッセージをサポートするサブメッセージを考えてみる。
(ある1階層に列挙するサブメッセージの数は5つを上限としよう...! そうなるようにグルーピングする:thinking:)
(基本的には根拠を列挙するイメージで、サブメッセージを考えてみる。5個を超えてしまう様であればグルーピングする...!:thinking:)

- 主メッセージ1「クエリ実行履歴とContext Constructionの仕組みさえあれば一定品質は担保できそうなので、テーブルメタデータが整備されてなくても果敢に導入していきましょう！」のサブメッセージ
  - 前提としてContext constructionの仕組みは必要です!
  - テーブルメタデータ整備は徐々にで良いと思います!
  - context constructionの精度向上も徐々にで良いと思います!
- 主メッセージ2「より価値を発揮するにはワークフロー制御が必要そうです！」のサブメッセージ
  - 品質向上には、context construction以外でも色んなコンポーネントが活用できそう!
  - LLMにSQL実行権限を与える場合は、ワークフロー制御してしっかり検証させた方が良さそう!

- 意識すべきtips
  - 主メッセージは、読み手のQに直接答えている必要がある。
  - ピラミッド作成時のtips
    - メッセージを書くときは1つの考えを短く明快に。
      - 要約メッセージの4つの鉄則
        - 名詞表現、体言止めは使用禁止
        - 「あいまい言葉」は使用禁止
        - メッセージはただ一つの文章で表現すること
        - 「しりてが」接続詞は使用禁止
      - 主メッセージとキーライン(=主メッセージを支持するサブメッセージ)は、仮で良いので早い時点で決める! 「大枠から詳細へ」がピラミッド作りの基本!
      - ピラミッド作成時には文書を書いてはいけない! 
        - 「文書を書くプロセス」と「考えを組み立てるプロセス」を分けるのがピラミッド原則の最大の特徴...！
        - ピラミッド内に書くのは「1つのメッセージ」である! この段階では文書を書くことは忘れて、考えを組み立てることに集中するべき！
    - ピラミッドを作る場合、下部は必ず複数メッセージになる。1対1の「ぶら下がり型ピラミッド」になってる場合は何かがおかしいかも...!

構成案
- はじめに
  - なぜ今回このトピックを喋りたいのか??
  - Text2SQLとは何か?? どういうモチベーションでText2SQLをやりたいの??
  - 最初に参考文献達を共有しておく
-  
- 共有したいポイント1:
  - まず前提としてテーブルメタデータの整備は一定投資が必要っぽい。
- 共有したいポイント2: 
  - LLMの事前学習した知識には自社のDWH事情は含まれないので、当然context constructionは必要。context constructionの方法としてRAGなどが一般的。
  - context constructionをより良い感じにやる工夫たち。
- 共有したいポイント3:
  - context construction(i.e. RAG)だけを頑張ればもうOKなのか??
    - これだけでOKだったら、RAGの検索部分だけを提供するMCPサーバーで十分そう。
  - 事例によっては、生成したSQLクエリの実行計画を取得させたり、レビュアーLLMを用意して、SQLクエリを精錬してたりする。
  - この辺りのワークフロー(処理の流れ)は、一定我々が制御しておいた方が良さそう?? あまりにLLM側のAgentic度合い(ワークフローを自由に決められる度合い)を高くしちゃうと、この辺り扱いづらそう...??
- 自由研究して今どんな感じか??
  - hogehoge
- 今困ってること: 社内メンバーに使ってもらってFB欲しいけど、どうやれば良いねん??
  - エンジニアだけだったら...
    - ローカルMCPサーバー化してVSCode上で使ってもらえそう。
    - あるいはローカル環境でStreamlitアプリケーションを起動してもらえそう??
  - エンジニア以外のメンバーにはどう展開したら良さそう??
    - リモート環境に社内限定アクセスのStreamlitアプリケーションを立てる??
    - あるいは、社内のSlack上で使えるようにする?? 
  - とりあえず自分のソフトウェアエンジニアリング力不足でモタモタしてる...!:thinking:



## ピラミット構造の型について

- ピラミッド構造の決定要素は、以下の3つ。
  - 第一: 読み手の疑問
  - 第二: 表現スタイル
  - 第三: 考えの構造
  - (**特に第一の要素が決まれば、第二・第三の要素はほぼ自動的に決まる**。)
- 第一の要素: 読み手の疑問の3分類
  - 「状況判断の疑問」: 状況判断を問う疑問。
    - 「これは問題か?」
    - 「どのような問題が存在するのか?」
    - 「どこに問題があるのか?」
    - 「なぜ問題があるのか?」
  - 「解決方針の疑問」: 問題解決の基本方針や戦略の決定/選択に関する疑問
    - 「問題を解決するために何ができるか？」
    - 「どうするのが最善か？」
  - 「解決行動の疑問」: 問題解決の具体的行動に関する疑問
    - 「具体的にどう実施すべきか？」
- 第二の要素: 考えの表現スタイルの2分類
  - 状況表現(Descriptive)
    - (状況は)...である
    - (状況は)...になるだろう
  - 行動表現(Prescriptive)
    - (解決のために)...すべきである
    - (解決のために)...することが必要である
    - (解決のために)...しなければならない
    - (解決のために)...してほしい
    - (解決のために)私は...します
- 第三の要素: 考えの構造の2分類
  - WHY構造
    - 主メッセージの理由/判断根拠などを下部で説明する
  - HOW構造
    - 主メッセージの具体的行動を下部で説明する

- 3つの要素を踏まえたピラミッド構造の基本パターン3つ + 応用パターン1つ
  - 基本パターン1: 状況のWHY
    - 状況分析や問題分析の報告書で用いられるパターン。
  - 基本パターン2: 方針のWHY
    - 方針提案書や戦略提案書で用いられるパターン。
  - 基本パターン3: 行動のHOW
    - 事業計画書や行動計画書で用いられるパターン。
  - 応用パターン1: WHYとHOWの三段論法
    - 問題分析 + 行動計画を1つのレポートで報告する必要がある場合。
    - この場合は「状況のWHY」と「行動のHOW」を組み合わせて、三段論法的なピラミッドを作る。
