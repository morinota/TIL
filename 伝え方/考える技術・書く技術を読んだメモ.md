## これは何??

- 「入門 考える技術・書く技術」を読んだメモです!

## 序章

## 1章メモ: 読み手の関心・疑問に向かって書く！　~OPQ分析で読み手の疑問を明らかにする~

- Q: 読み手が複数いる場合はどうする??
  - 前提として、読み手の疑問に向かって書くのが説得力のある文書を書くための基本。
    - また厳密には、読み手の疑問は一人一人異なる。P
  - TODO: 後で書く!
  - とにかく大切なのは「読み手が誰か」を考えること!

## 2章メモ: (ピラミッド作成の基礎編)考えを形にする ~メッセージを絞り、グループ化する「ピラミッドの基本」~

いい感じの文章を書くためには、まず**書き手自身の手で考えの構造を整理しておく**必要がある!

### 一度に覚えられる数には限界がある!

- 本書での言葉の定義
  - 「メッセージ」: 読み手に伝えようとしてる考え。
  - 「主メッセージ」: その文書で最も伝えたいメッセージ。
- OPQ分析に関連して、読み手の疑問(Q)に対する直接の答え(A)を主メッセージとする。さてその時、読み手は主メッセージを読んだだけですぐに納得してくれるだろうか??
  - おそらく納得しない! 大抵の場合「なぜそんなことが言えるのか?」「具体的にはどうすれば良いのか?」など更なる疑問を持つはず...!
- 主メッセージの判断根拠を10個列挙してみても読み手は混乱する。なぜなら**根拠の数が多すぎるために、すぐに全体を理解できないから!**
  - 論理学者アリストテレスの言葉: 
    - 「何かを認識するとき、ぼくたちは物事を様々なグループやカテゴリーに仕分けする。……（中略）……牛は牛舎に、馬は厩に、豚は豚小屋に、鶏は鳥屋に入れる。……（中略）……これと同じことを、ぼくたちは頭のなかでもしているんだよ」
  - アメリカの認知心理学者ジョージミラーの論文「マジックナンバー7、プラス/マイナス2」:
    - 「**人間が短期記憶できる考えの数は７±２（すなわち、５～９）である**」
    - ちなみに、ライティングの世界では安全を取り、**下限である「５」を限界の数とするのが一般的**らしい...!
- どうすれば読み手の負担を減らせる??
  - 情報の受け取り手の頭の中は、内容を理解するために受け取った多くの情報をグループ化(パターン化)し、理解可能な考えの中に収めようとする。それならば、**発信者が予め情報をグループ化して伝えれば、読み手の負担はグッと減るはず**...!

### メッセージ構造をそのまま文書へ!

ピラミッド型に組み立てたメッセージ構造は、そっくりそのまま文書構造になる! 
「**文書構造 = メッセージ構造」を強く意識しよう...!!**

- 1つの項目には1つのメッセージ!
  - 主メッセージを1つに絞り込むことにより、明快かつ強力に相手に印象付けられる!
    - 逆に、もし主メッセージを1つに絞り込めないようであれば、それは最初から2つの文書に分けて書くべき!
  - 同様の理由で、章や段落といった下部メッセージについても、1つに絞り込むべき!
- **同じ固まりに2つのメッセージがあるなら、それは最初から2つの塊に分けるべき!**
  - 文書全体で伝えたい考え、1つの文書メッセージ(主メッセージ)
  - ↓各章で言いたいこと、1つの章メッセージ
  - ↓各段落で言いたいこと、1つの段落メッセージ

### グループ化を行い要約メッセージを作る!

- **考えを組み立てるプロセスには、2種類の作業**がある。「グループ化」と「要約メッセージ」はピラミッド作りの要である!
  - 「要約メッセージを探す」作業
  - 「グループを作る」作業
- 作業①グループ化し、要約メッセージを探す
  - **複数のメッセージを1つのグループにくくり、そのグループを象徴する1つのメッセージ(要約メッセージ)を見つけ出す!**
- 作業②メッセージに従って、グループを作る
  - **ある1つのメッセージについて、その根拠や説明となるメッセージ(支持メッセージ)のグループを作り出す。**
- どちらかだけを行うのではなく、**2種類の作業で相互チェックをかけながら**考えを組み立てていくのが良さそう。
  - ex. 
    - グループ化が曖昧だと明快な要約メッセージを作れない -> グループ化を見直す
    - 曖昧なメッセージ達をグループ化しようとすると、要約メッセージが見つからない -> メッセージを見直す。
- tips
  - グループ化した根拠そのものがグループ名、すなわち要約メッセージになる!
  - メッセージが一般論にならないようにする!
    - 要約メッセージとは、グループ化の根拠(各メッセージに共通する特性など)をハイライトしたもの。
    - 全てを包括しようとすると抽象的な一般論になりがち。
    - 一般論になってしまうと、聞くまでもないことを言っているだけになり、相手に何も伝わらない。
  - **明快な要約メッセージと、説得力のあるグループ化は表裏一体! 切り離せない関係にある!**
    - 要約メッセージが曖昧だと...
      - 要約メッセージに従ってグループを作ろうとしても、説得力のあるグループが作れない。そもそもグループ全体で伝えたい考えが曖昧だから!
    - グループ化そのものがおかしいと...
      - 明快な要約メッセージが作れない。要約メッセージはグループ化の根拠であるため、グループ化の根拠が曖昧だと要約メッセージも曖昧になってしまう!
  - まあ多くは慣れの問題!訓練訓練!

### 要約メッセージを文章にするときの「4つの鉄則」

- 「要約メッセージ」と「グループ化」に加えて、ピラミッドを組み立てる上でもう一つ注意すべき重要なことは、**日本語特有の文章表現!**
  - **日本語表現は、考えを曖昧な方向へ引っ張り、明快なライティング作成の足枷になりがち...!**
- ピラミッド内の全てのメッセージを作る上で、**日本語表現に関する以下の4つの鉄則**を守ることが重要!
  - **鉄則1: 名詞表現、体言止めは使用禁止とする**
    - メッセージというよりも見出しになってしまいがち。結果として中身のないメッセージで終わってしまう。
    - ex.
      - 悪い例: 「東南アジア市場の推移」
      - 良い例: 「東南アジア主要国の市場は、過去５年、年率20％近くの大きな拡大を見せている」
    - **名詞表現、体言止めは、メッセージを明確に表現しようとする本来の目的を妨げてしまう**。
      - にもかかわらず、いかにも上手くまとまってるように見えるせいか、無意識に使ってしまう人が後を経たない...使用禁止を心がけよう!
  - 鉄則2: 「あいまい言葉」は使用禁止とする
    - あいまい言葉の例: 「見直し」「再構築」「問題」「適切な」
    - あいまい言葉は、考えクリアしていくときの妨げになるだけ! 原則として使用禁止にしよう!
    - ex. 
      - 悪い例: 「営業組織の見直しを提案する」
      - 良い例: 「東京・大阪など大都市圏での営業人員を増大させる」
    - ex.
      - 悪い例: 「営業戦略の再構築が必要である」
      - 良い例: 「営業戦略を、東京・大阪など大都市強化型に変更する必要がある」
    - ex. 
      - 悪い例: 「この商品は価格が問題である」
      - 良い例: 「この商品は小売価格にばらつきがありすぎる」
    - ex. 
      - 悪い例: 「ABC事業については早急かつ適切な対処を講じる予定である」
      - 良い例: 「ABC事業については、大都市強化を目的とした具体的な行動計画を次回の経営委員会にて発表する予定である」
    - NOTE: これはあくまで「考えるプロセス」で使用禁止、という話!
      - 最終的に上司やクライアントに提出する文書において、あいまい言葉を使うなという話ではない! **渡世(とせい)の知恵として「意図的に」使用するのはOK!** 
      - 重要なのは、考えを表現し組み立てる段階であいまい言葉を使わないこと!
  - 鉄則3: メッセージはただ一つの文章で表現する
    - そうでないと要約にならない。もし2つあるようなら、要約がうまくいってない or グループ化がうまくいってない。
  - 鉄則4: 「しりてが」接続詞は使用禁止とする
    - まずメッセージを表現する場合には、**「1つの主部と1つの述部」で構成される単文表現にするのがベスト**!　どうしても2つの文章を組み合わせた複文で表現したい場合も、**接続詞に"and"を使わないように**しよう!
      - なぜなら、"and"は接続詞た2文の論理的な関係を明らかにしてくれないから。単にメッセージが2つになってしまう。
    - 「しりてが」接続詞: "and"のように、**論理的な関係が明快でない接続詞**。
      - ex. 
        - 「...し、...」
        - 「...であり、...」
        - 「...して、...」
        - 「...だが、...」
        - 「...せず、...」
        - 「...なく、...」
    - NOTE: この原則も「考えるプロセス」での話!
      - 「しりてが」接続詞はあまりにも日本語の一部として溶け込んでるので、「書くプロセス」で一才使用しない、というは不可能に近い。
      - 重要なのは、少なくとも考えを表現し組み立てる段階で原則使用しないこと!

### 「So What?　（それで何が言いたいの?）」を繰り返す!

- **要約メッセージ発見のベストツール**として「So What? (それで何が言いたいの?)」という呪文がある!
  - 大概のメッセージは、はじめはあいまいでモヤモヤしてるもの。
  - **"So What?"と繰り返し自問自答を続ける**ことで、混沌とした頭の中の霧が徐々に晴れてきて、本当に伝えたい具体的なメッセージを拾い出すことができる!
- NOTE: これも「考えるプロセス」での話!
  - 「書く作業」での実際の文書では、さまざまな影響に配慮した政治的表現になるかもしれない。
  - しかし、考えを表現し組み立てる段階では、妥協せずに「So What?」を繰り返し自問自答して、メッセージを明快にすることが重要!

## 3章メモ: (ピラミッド作成の実践編)ピラミッドを作る~ロジックを展開する、チェックする~

### 帰納法でロジックを展開する

- 帰納法はビジネスロジックの7~8割を占める。
- 帰納法の仕組み
  - 複数の特定事象(前提)から要約(結論)を導くロジック展開。
    - **結論は常に推論になる**。
  - 前提は必ず複数になる。なぜなら、1つでは結論を導くロジックとして不十分だから。
- 「同じ種類の考え」を前提とする!
  - 帰納法の場合、前提(下部メッセージ)は全て「同じ種類の考え」になる。**複数の同じ種類の考えから1つの結論を推測する!**
  - 「同じ種類の考え」の3パターン:
    - 「主部が同じ」パターン
      - 下部メッセージの主部が同じ場合、要約メッセージは主部が同じで述部が推測結果になる。
    - 「述部が同じ」パターン
      - 下部メッセージの述部が同じ場合、要約メッセージは述部が同じで主部が推測結果になる。
    - 「意味するものが同じ」パターン
      - 下部メッセージの意味するものが同じ場合、要約メッセージは、下部メッセージ達が共通して「意味するもの」になる!
- 帰納法は「つなぎ言葉」でチェックする!
  - ピラミッドが上手にできてるかをチェックするには、第三者に見てもらうのが一番。しかし自己チェックの場合は「つなぎ言葉」(接続助詞)を使った自己チェックが有効!
  - ステップ1: 「つなぎ言葉」をメッセージ文の冒頭に入れてみる!
    - **全ての下部メッセージの冒頭に、以下のようなつなぎ言葉を入れてみる**。
      - 「なぜそう判断するかと言えば」
      - 「なぜならば」
      - 「たとえば」
      - 「具体的には」
      - ,...etc.
  - ステップ2: 声に出して読み上げ、上下の辻褄を確認する
    - **上部の要約メッセージ → つなぎ言葉 → 下部メッセージの順に読み上げ、それぞれ上下の辻褄が合っているかを確認する。**
    - どうしても辻褄が合わない場合...
      - 可能性1: 上下のメッセージ表現に問題がある!
      - 可能性2: 上下のロジック構造に問題がある!
  - ステップ3: 下部メッセージ群のつなぎ言葉を見比べる
    - 下部メッセージ群のつなぎ言葉が全て同じであれば、横の関係(グループ化)はうまくいっている可能性が高い。
    - もしつなぎ言葉が異なる場合...グループ化に問題がある可能性が高い...!
- 結論を先に述べる!
  - **結論を先に言い、その後に説明（理由、根拠、方法論など）を挙げていくスタイルはわかりやすくシンプル**であり、スピードと明快さが求められるビジネスに非常に適してる。
    - ex. 
      - 「私の考えは……です。理由は３つあります。第一の理由は……、第二の理由は……、第三の理由は……」
      - 「私は...すべきだと考えます。これを実行に移す場合、4つの注意ポイントがあります。1つ目は...、2つ目は...、3つ目は...、4つ目は...」
    - ライティングのみならず、ミーティングでの発表や上司への説明など、あらゆるシーンでこのような説明ができるように心がけよう!
    - ます。会議でこのような発表ができるようになれば、上司や周囲の人はあなたの説明に一目置くようになるはず...!
  - ちなみに、説明の数は2~5つを心がけよう!

### 演繹法でロジックを展開する

### ピラミッド作成のコツ!

#### コツ1: 一つの考えを短く明快に!

- ピラミッド箱内で記入するメッセージは短く明快にしておくと以下の点でメリットがある!
  - 縦横のメッセージの関係が見えやすくなる!
  - おかしなメッセージに気づきやすくなる!
- メッセージを書く際には、前述された要約メッセージの4つの鉄則を意識するとよい...!

- 注意ポイント2つ
  - **主メッセージとキーライン(=主メッセージを支持するサブメッセージ)は早い時点で決める!** 仮で良いので!「大枠から詳細へ」がピラミッド作りの基本!
  - **ピラミッド内で文書を書こうとしてはいけない!**
    - 「文書を書くプロセス」と「考えを組み立てるプロセス」を分けるのがピラミッド原則の最大の特徴...！
    - ピラミッド内に書くのは「1つのメッセージ」である! この段階では文書を書くことは忘れて、**考えを組み立てることに集中**するべき！


#### コツ2: 縦と横の「二次元」を意識する!
#### コツ

## まずOPQ分析  

OPQ分析で読み手の関心・疑問を整理してみる。

- Objective(望ましい状況): 
  - Text2SQLアプリケーションが実現され、社内のデータ分析が効率化・高速化・標準化・民主化されていること。
    - より具体的には、アナリスト&エンジニアの分析業務が効率化・高速化されること。また、普段分析業務に関わらない人でも簡単に分析ができるようになること(民主化、標準化)。
- Problem(問題, 現状とObjectiveとのギャップ):
  - LLMは一定普及したが、社内のデータ分析業務は依然としてアナリスト&エンジニアの手作業に依存している。データ分析の知識は属人化している。
    - 「どこにどんなデータがあるか?」という知識、A/Bテストの効果検証方法などの統計的な知識、etc.
- Question(読み手の疑問): 
  - どうしたらText2SQLを社内に導入して、それが価値を発揮し、社内のデータ分析業務を効率化・高速化・標準化・民主化できるのか?? なぜまだ導入できてないのか??
      
## 主メッセージを考えてみる!

主メッセージは、読み手のQに直接答えている必要がある。

- 主メッセージ: 価値を発揮するText2SQLアプリケーションを作るには...
  - 1. クエリ実行履歴とContext Constructionの仕組みさえあれば一定品質は担保できそうなので、テーブルメタデータが整備されてなくても果敢に導入していきましょう！
  - 2. より価値を発揮するにはワークフロー制御が必要そうです！

とりあえず2つメッセージが出てきてしまってるが、一旦OKとみなして、次に行こう。
この2つの主メッセージをサポートするサブメッセージを考えてみる。
(ある1階層に列挙するサブメッセージの数は5つを上限としよう...! そうなるようにグルーピングする:thinking:)
(基本的には根拠を列挙するイメージで、サブメッセージを考えてみる。5個を超えてしまう様であればグルーピングする...!:thinking:)

- 主メッセージ1「クエリ実行履歴とContext Constructionの仕組みさえあれば一定品質は担保できそうなので、テーブルメタデータが整備されてなくても果敢に導入していきましょう！」のサブメッセージ
  - 前提としてContext constructionの仕組みは必要です!
  - テーブルメタデータ整備は徐々にで良いと思います!
  - context constructionの精度向上も徐々にで良いと思います!
- 主メッセージ2「より価値を発揮するにはワークフロー制御が必要そうです！」のサブメッセージ
  - 品質向上には、context construction以外でも色んなコンポーネントが活用できそう!
  - LLMにSQL実行権限を与える場合は、ワークフロー制御してしっかり検証させた方が良さそう!

- 意識すべきtips
  - 主メッセージは、読み手のQに直接答えている必要がある。
  - ピラミッド作成時のtips
    - メッセージを書くときは1つの考えを短く明快に。
      - 要約メッセージの4つの鉄則
        - 名詞表現、体言止めは使用禁止
        - 「あいまい言葉」は使用禁止
        - メッセージはただ一つの文章で表現すること
        - 「しりてが」接続詞は使用禁止
      - 主メッセージとキーライン(=主メッセージを支持するサブメッセージ)は、仮で良いので早い時点で決める! 「大枠から詳細へ」がピラミッド作りの基本!
      - ピラミッド作成時には文書を書いてはいけない! 
        - 「文書を書くプロセス」と「考えを組み立てるプロセス」を分けるのがピラミッド原則の最大の特徴...！
        - ピラミッド内に書くのは「1つのメッセージ」である! この段階では文書を書くことは忘れて、考えを組み立てることに集中するべき！
    - ピラミッドを作る場合、下部は必ず複数メッセージになる。1対1の「ぶら下がり型ピラミッド」になってる場合は何かがおかしいかも...!

構成案
- はじめに
  - なぜ今回このトピックを喋りたいのか??
  - Text2SQLとは何か?? どういうモチベーションでText2SQLをやりたいの??
  - 最初に参考文献達を共有しておく
-  
- 共有したいポイント1:
  - まず前提としてテーブルメタデータの整備は一定投資が必要っぽい。
- 共有したいポイント2: 
  - LLMの事前学習した知識には自社のDWH事情は含まれないので、当然context constructionは必要。context constructionの方法としてRAGなどが一般的。
  - context constructionをより良い感じにやる工夫たち。
- 共有したいポイント3:
  - context construction(i.e. RAG)だけを頑張ればもうOKなのか??
    - これだけでOKだったら、RAGの検索部分だけを提供するMCPサーバーで十分そう。
  - 事例によっては、生成したSQLクエリの実行計画を取得させたり、レビュアーLLMを用意して、SQLクエリを精錬してたりする。
  - この辺りのワークフロー(処理の流れ)は、一定我々が制御しておいた方が良さそう?? あまりにLLM側のAgentic度合い(ワークフローを自由に決められる度合い)を高くしちゃうと、この辺り扱いづらそう...??
- 自由研究して今どんな感じか??
  - hogehoge
- 今困ってること: 社内メンバーに使ってもらってFB欲しいけど、どうやれば良いねん??
  - エンジニアだけだったら...
    - ローカルMCPサーバー化してVSCode上で使ってもらえそう。
    - あるいはローカル環境でStreamlitアプリケーションを起動してもらえそう??
  - エンジニア以外のメンバーにはどう展開したら良さそう??
    - リモート環境に社内限定アクセスのStreamlitアプリケーションを立てる??
    - あるいは、社内のSlack上で使えるようにする?? 
  - とりあえず自分のソフトウェアエンジニアリング力不足でモタモタしてる...!:thinking:



## ピラミット構造の型について

- ピラミッド構造の決定要素は、以下の3つ。
  - 第一: 読み手の疑問
  - 第二: 表現スタイル
  - 第三: 考えの構造
  - (**特に第一の要素が決まれば、第二・第三の要素はほぼ自動的に決まる**。)
- 第一の要素: 読み手の疑問の3分類
  - 「状況判断の疑問」: 状況判断を問う疑問。
    - 「これは問題か?」
    - 「どのような問題が存在するのか?」
    - 「どこに問題があるのか?」
    - 「なぜ問題があるのか?」
  - 「解決方針の疑問」: 問題解決の基本方針や戦略の決定/選択に関する疑問
    - 「問題を解決するために何ができるか？」
    - 「どうするのが最善か？」
  - 「解決行動の疑問」: 問題解決の具体的行動に関する疑問
    - 「具体的にどう実施すべきか？」
- 第二の要素: 考えの表現スタイルの2分類
  - 状況表現(Descriptive)
    - (状況は)...である
    - (状況は)...になるだろう
  - 行動表現(Prescriptive)
    - (解決のために)...すべきである
    - (解決のために)...することが必要である
    - (解決のために)...しなければならない
    - (解決のために)...してほしい
    - (解決のために)私は...します
- 第三の要素: 考えの構造の2分類
  - WHY構造
    - 主メッセージの理由/判断根拠などを下部で説明する
  - HOW構造
    - 主メッセージの具体的行動を下部で説明する

- 3つの要素を踏まえたピラミッド構造の基本パターン3つ + 応用パターン1つ
  - 基本パターン1: 状況のWHY
    - 状況分析や問題分析の報告書で用いられるパターン。
  - 基本パターン2: 方針のWHY
    - 方針提案書や戦略提案書で用いられるパターン。
  - 基本パターン3: 行動のHOW
    - 事業計画書や行動計画書で用いられるパターン。
  - 応用パターン1: WHYとHOWの三段論法
    - 問題分析 + 行動計画を1つのレポートで報告する必要がある場合。
    - この場合は「状況のWHY」と「行動のHOW」を組み合わせて、三段論法的なピラミッドを作る。
