# 推薦システム開発に必要な3つのスキル

３つのスキルを全て兼ね備えた人は稀であり、多くの企業では、それぞれのスキルを持った人が密にコミュニケーションしながら推薦システムを構築している。

## ビジネス力

- まずは、ビジネス観点から推薦システムを導入する事で何を期待したいのかを定義する事が大切。

  - 場合によっては、推薦システムが要らなかったり、人気度順の推薦だけで事足りたりする。
  - 具体的には、「**推薦システムを導入する事で、ユーザのどの行動の変容を期待するのか**」といったKey Goal Indicator(KGI)やKey Performance Indicator(KPI)の策定が大切。
  - クリック率なのか、購入率なのか、回遊率なのか、Twitterへの投稿数なのか、**どのユーザのどの行動を最大化したいのか**によって、作成すべき推薦システムも異なる。

- KPIの策定には、対象のサービスについて熟知し、サービス上でのユーザの行動について深く理解している必要がある。
  - 例えば、YouTubeでは、ユーザのトータル視聴時間をKPIとして、それが最大化するようにサービス設計がされている。
    - **視聴時間がKPIなので、ユーザが最後まで視聴してくれる動画を推薦する事が重要になる**。
  - 当初、YouTubeでは視聴動画数をKPIとして進めていたが、サムネイル画像が目を引く動画ばかりが推薦されるという問題が起きた。
  - そのため、視聴時間をKPIにするように変更した。
    - その際には、各動画に対して視聴時間のログが細かい粒度で取れていなかった為、視聴時間の正確なログがとれるようにログ取得の整備もしている。
  - KPIを策定する際には、現在取れているデータから考えるのではなく、**ユーザの行動の本質を捉えた指標から検討**し、もしそのデータがない場合は、エンジニアと協力しながら、ログの整備をしていく。

## データサイエンス力

- ビジネス目標を達成する為の理想的な推薦システムを実際に実現可能な推薦システムに落とし込む。その課程で、データサイエンス力が必要になる。
- いきなり理想とする推薦システムを作ろうとはせずに、まずは、王道の手法を使って、どのくらいの精度が出るのか確認して、理想と現実のギャップが大きすぎないかを検討し、適宜ビジネスサイドとコミュニケーションすることが大切。
  - その試行錯誤の課程では、データの性質や各推薦アルゴリズムの長所・短所を把握しておく事が重要。
  - このような俯瞰的なデータサイエンスの知見がある事で、試行錯誤の時間を短縮する事ができる。

## データエンジニア力

- 実際に推薦システムを実サービスに組み込む際には、様々なビジネス要件を考慮した上で実装を行い、システムを安定的に稼働させる必要がある。
  - 例えば、一日一回メールでユーザにオススメの商品を推薦したい場合を考えると、全ユーザに対する推薦リスト作成の演算が24時間以内に終了している必要がる。
- 素晴らしい推薦システムが定式化されても、計算に100時間かかるとしたら、実ビジネスで使う事ができない。
  - ＝＞計算が早く終るように、処理を並列化したり、データベースの設計やチューニングを工夫したりする必要がある。
- また、「毎日推薦システムに使うデータを加工し、推薦リスト作成演算を行い、推薦リストをデータベースに格納する」といった一連の処理のパイプラインを整備する必要がある。
- これらを安定して稼働させる為には、高度なデータエンジニアリング力が求められる。

# 推薦システムのプロジェクトの進め方

1. 課題定義
2. 仮説立案
3. データ設計・収集・加工
4. アルゴリズム選定
5. 学習・パラメータチューニング
6. システム実装
7. 評価、改善

主に1,2,7でビジネス力が、3,4,5,6,7でデータサイエンス・データエンジニアリング力が必要になる。

## 課題定義

- サービスに推薦システムを導入したい場合は、まずは**ビジネス上のそもそもの目的を明確化**する事が重要。
  - ex)「売上を2倍にしたい」「会員登録を2倍にしたい」=これはKGI？？
  - 例えば、「一ヶ月の売上を2倍にしたい」場合には、**更にそれをブレイクダウン**して、1ユーザあたりの売上を2倍にするのか、ユーザ数を2倍にするのか等のビジネス上の指標(KPI)を定めていく。
- そして、KPIの目標と現状の差を確認した上で、**現状の自サービスの課題を整理**して、**適切な打ち手を検討**する。
  - 例えば、Amazonの様なECサイトにおいて「一ヶ月の売上を2倍にする」(=KGI??)為に、「一人あたりの売上」をKPIとしてそれを2倍にするという目標を定めたとする。
  - 一人あたりの売上を2倍にするには、**どこに伸びしろがあるか**を分析していく。
    - 分析には、データを用いて分析する**定量的な方法**と、ユーザにヒアリングする**定性的な方法**とがある。
    - 定量的な分析では、ウェブサイトの**ユーザの行動ログのデータを分析**する事で、「そもそも検索をするユーザが少ない」や「検索するユーザは多いが最初の検索結果ページで離脱してしまう」等の現状の課題を知ることができる。
    - 一方で、「なぜそもそも検索をするユーザが少ないのか」や「なぜ最初の検索結果ページで離脱してしまうのか」といった理由については、データから調査するより、直接ユーザにヒアリングする事で示唆を得られる事が多い。
    - ユーザのヒアリングでは、「どのような単語で検索すれば良いか分からず途中でやめてしまった」や「検索結果の画面で各アイテムのタイトルしか表示されておらず、一つ一つアイテムをクリックして詳細を知るのが大変だった」等の行動ログから読み解くことのできない潜在的なユーザの心理状態に関するインサイトを得ることができる。
  - データとユーザからのヒアリングの両方のアプローチで、**現状の課題の解像度を高め**て、**今回のビジネスゴール(KGIやKPI)を達成する上での、各課題の重要度を決めて**いく。

データによる分析やユーザのヒアリング結果として、以下の2つの課題が重要であると判明したとする。

- アイテムが大量に有りすぎる為に、現状の単純な検索エンジンではお目当てのアイテムにたどり着けず離脱率が高い。
- 各アイテムの詳細画面で、そのアイテムに類似したアイテムを現状知ることができず、そこでの離脱率も高い。

## 仮説立案

次に各課題を解決する方法とそれを実現する為のコストを検討して、費用対効果(ROI:Return On Investment)が高い施策から取り組む。

- 今回の例では、「検索結果にアイテムが大量にありお目当てのアイテムにたどり着けない」という課題に対しては、そこに人気度順や価格順でソートできる機能を追加するだけで、ユーザがお目当てのアイテムを探しやすくなり、離脱率を下げる事ができる。
  - このケースでは、まずは検索周りの実装コストが低く重要度が高い課題を解決してから、水栓システムに取り掛かるのが効果的。
- このように、わざわざ推薦システムを導入するより、他にビジネスゴールを解決できるコストが低い方法がある場合はそっちをまず検討する。
  - 特に**検索システムの機能改善をしたほうが費用対効果が高い場合も多い**為、わざわざ推薦システムを導入せずに、検索機能を拡張する方向性も検討する。

実際のビジネス場面では、上からの「推薦システムを導入するぞ」という命令が決定事項で降りてくることがあるかも。
その時には、一度立ち止まって、本当に、**現状の課題に対して推薦システムの導入が一番費用対効果が高いのか**を再検討することが大切。
検索システムを改善したり、デザインを変えた方が良かったりするケースもある。

そして、検索周りの改修が完了し、それらの課題が解決されたとする。次に重要な課題である各アイテムの詳細画面での類似アイテムの推薦機能に着手する。どのような類似度推薦を実施するかは、ユーザのニーズをヒアリングして整理していく。

- 手芸品の販売サイトでは、とある作品に対して、同じ作者の作品を類似度作品として並べるだけで効果があるかもしれない。
- 作品のジャンルが同じものを並べる方が効果があるかもしれない。
- 音楽のストリーミングサイトでは、音楽の曲調が似ている曲より、その曲が流行った時期の別の曲を推薦する事が効果的かもしれない。
- また、Amazonのように「この商品を買った人はこんな商品を買っています」という類似度推薦が効果的かもしれない。

このようにアイテムの類似度推薦といっても、いくつかの観点があるので、ユーザが一番求めている類似アイテムは何なのかを把握した上で実装していく事が大切。

## データ設計・収集・加工

## アルゴリズム選定

## 学習・パラメータチューニング

## システム実装

## 評価・改善
