# パスパラメータ

Pythonの**format文字列と同様のシンタックス**で「パスパラメータ」や「パス変数」を宣言できる。

```python
from fastapi import FastAPI

app = FastAPI()


@app.get("/items/{item_id}") # ここ！
async def read_item(item_id):
    return {"item_id": item_id}
```

パスパラメータ item_id の値は、引数 item_id として関数に渡される。
しがたって、この例を実行して http://127.0.0.1:8000/items/foo にアクセスすると、次のレスポンスが表示される。

```
{"item_id":"foo"}
```

## パスパラメータと型

- 標準のPythonの型アノテーションを使用して、関数内のパスパラメータの型を宣言できる
  - **型宣言により、関数内でのエディターサポート (エラーチェックや補完など) が提供**される！

```python
from fastapi import FastAPI

app = FastAPI()


@app.get("/items/{item_id}")
async def read_item(item_id: int):
    return {"item_id": item_id}
```

## データ変換

この例を実行し、ブラウザで http://127.0.0.1:8000/items/3 を開くと、次のレスポンスが表示される。

- 関数が受け取った（および返した）値は、文字列の "3" ではなく、Pythonの int としての 3 であることに注意
- したがって、型宣言を使用すると、FastAPIは自動リクエスト "解析" を行う。

## データバリデーション

しかしブラウザで http://127.0.0.1:8000/items/foo を開くと、次のHTTPエラーが表示される。

```json
{
  "detail": [
    {
      "loc": ["path", "item_id"],
      "msg": "value is not a valid integer",
      "type": "type_error.integer"
    }
  ]
}
```

- これは、パスパラメータ item_id が int ではない値 "foo" だから!
- http://127.0.0.1:8000/items/4.2 で見られるように、intのかわりに float が与えられた場合にも同様なエラーが表示される。

確認

- 従って、Pythonの型宣言を使用することで、FastAPIはデータのバリデーションを行う。
- 表示されたエラーには問題のある箇所が明確に指摘されていることに注意。
- これは、APIに関連するコードの開発およびデバッグに非常に役立つ。

## ドキュメント
そしてブラウザで http://127.0.0.1:8000/docs を開くと、以下の様な自動的に生成された対話的なドキュメントが表示されます。

- 繰り返しになりますが、Python型宣言を使用するだけで、FastAPIは対話的なAPIドキュメントを自動的に生成する（Swagger UIを統合）
- パスパラメータが整数として宣言されていることに注意

## 標準であることのメリット、ドキュメンテーションの代替物

## Pydantic

## 順序の問題

# 定義済みの値

## `Enum`クラスの作成

## パスパラメータの宣言

## ドキュメントの確認

## Python列挙型の利用

# パスを含んだパスパラメータ

# まとめ

簡潔で、本質的で、標準的なPythonの型宣言を使用することで、FastAPIは以下を行う：

- エディタサポート：
- データ「解析」
- データバリデーション
- APIアノテーションと自動ドキュメント生成

そしてこれはたった一度宣言するだけ。
これは恐らく、(パフォーマンスを除いて) 他のフレームワークと比較したときの、FastAPIの主な目に見える利点。

# リンク

- https://fastapi.tiangolo.com/ja/tutorial/path-params/
