# リンク

- https://fastapi.tiangolo.com/ja/tutorial/
- https://fastapi.tiangolo.com/ja/tutorial/first-steps/

# 最初のステップ

最もシンプルなFastAPIファイルは以下。

```python
from fastapi import FastAPI

app = FastAPI()


@app.get("/")
async def root():
    return {"message": "Hello World"}
```

これをmain.pyにコピーし、以下のコマンドでライブサーバーを実行する。

```
uvicorn main:app --reload
```

`uvicorn main:app`コマンドの意味は以下：

- `main`: `main.py`ファイル。
- `app`: `main.py`内部で作られるobject(`app = FastAPI()`の様に記述される)。
- `--reload`:コードの変更時にサーバーを再起動させる。開発用。

その出力には、次のような行がある：

```
INFO:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
```

この行はローカルマシンでアプリが提供されているURLを示している。

## チェック

ブラウザで、http://127.0.0.1:8000 を開く。
次のようなJSONレスポンスが表示される:

## 対話型APIドキュメント

次に、http://127.0.0.1:8000/docs にアクセスする。
自動生成された対話的APIドキュメントが表示される(Swagger UIで提供)

## 他のAPIドキュメント

次に、http://127.0.0.1:8000/redoc にアクセスする。
先ほどとは異なる、自動生成された対話的APIドキュメントが表示される (ReDocによって提供):

## OpenAPI

FastAPIは、APIを定義するためのOpenAPI標準規格を使用して、すべてのAPIの「スキーマ」を生成する。

- 「スキーマ」
  - 「スキーマ」は定義または説明です。実装コードではなく、単なる抽象的な説明(方法論??)
- API「スキーマ」：
  - ここでは、OpenAPIはAPIのスキーマ定義の方法を規定する仕様。
  - このスキーマ定義はAPIパス、受け取り可能なパラメータなどが含まれる。
- データ「スキーマ」：
  - 「スキーマ」という用語は、JSONコンテンツなどの一部のデータの形状を指す場合もある。
  - そのような場合、スキーマはJSON属性とそれらが持つデータ型などを意味する。

OpenAPIはAPIのためのAPIスキーマを定義する。
そして、そのスキーマはJSONデータスキーマの標準規格に準拠したJSONスキーマを利用するAPIによって送受されるデータの定義（または「スキーマ」）を含んでいる。

## `oepnapi.json`を確認
素のOpenAPIスキーマがどのようなものか興味がある場合、FastAPIはすべてのAPIの説明を含むJSON（スキーマ）を自動的に生成する。

次の場所で直接確認できる：http://127.0.0.1:8000/openapi.json

以下の様なJSONが表示される：

```json
{
    "openapi": "3.0.2",
    "info": {
        "title": "FastAPI",
        "version": "0.1.0"
    },
    "paths": {
        "/items/": {
            "get": {
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {



...

```
## OpenAPIの目的
OpenAPIスキーマは、FastAPIに含まれている2つの**インタラクティブなドキュメントシステムの動力源**。

そして、OpenAPIに基づいた代替案が数十通りある。
FastAPIで構築されたアプリケーションに、これらの選択肢を簡単に追加できる。

また、APIと通信するクライアント用のコードを自動的に生成するために使用することもできる。たとえば、フロントエンド、モバイル、またはIoTアプリケーション。

# ステップ毎の要約


# まとめ

- FastAPIをImport
- appインスタンスを生成
- パスオペレーションデコレータを記述(@app.get("/"))
- パスオペレーション関数を定義(上記のdef root():　...のように)
- 開発サーバを起動(`uvicorn main:app --reload`)
