---
marp: true
theme: default
paginate: true
style: |
  section {
    font-family: 'Noto Sans JP', sans-serif;
  }
  h1 {
    color: #00d4aa;
    border-bottom: 3px solid #00d4aa;
    padding-bottom: 10px;
  }
  h2 {
    color: #00a688;
  }
  .columns {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
  }
  code {
    background-color: #f4f4f4;
    padding: 2px 4px;
    border-radius: 3px;
  }
  pre code {
    background-color: transparent;
    padding: 0;
  }
  blockquote {
    border-left: 4px solid #00d4aa;
    padding-left: 10px;
    color: #666;
  }
  .highlight {
    background-color: #fffacd;
    padding: 2px 4px;
    border-radius: 3px;
  }
---

# Turso + SQLite ã§å®Ÿç¾ã™ã‚‹
# ã‚¨ãƒƒã‚¸åˆ†æ•£ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹

2025.09.04 LT

---

# ä»Šæ—¥è©±ã™ã“ã¨

1. **SQLiteã£ã¦ãã‚‚ãã‚‚ä½•ãŒã™ã”ã„ã®ï¼Ÿ**
2. **ãªãœSQLiteã‚’æ›¸ãç›´ã™å¿…è¦ãŒã‚ã£ãŸã®ã‹ï¼Ÿ**
3. **Tursoã£ã¦ä½•ï¼Ÿãã®é©æ–°æ€§**
4. **Embedded Replicasã«ã‚ˆã‚‹çˆ†é€ŸDBä½“é¨“**
5. **Pythoné€£æºã¨Vector Searchã®å®Ÿè£…**

---

# SQLiteã®æ„å¤–ãªå®ŸåŠ› ğŸš€

## ä¸–ç•Œã§ä¸€ç•ªä½¿ã‚ã‚Œã¦ã„ã‚‹RDBMS

- **åˆ©ç”¨è€…æ•°: æ•°åå„„äºº** ğŸ˜²
  - ã‚¹ãƒãƒ›ï¼ˆAndroid/iOSï¼‰ã«çµ„ã¿è¾¼ã¾ã‚Œã¦ã„ã‚‹ã‹ã‚‰ï¼
- **çµ„ã¿è¾¼ã¿å‹ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**
  - ã‚µãƒ¼ãƒãƒ¼ä¸è¦ã€è¨­å®šä¸è¦
  - `pip install` ã™ã‚‹ã ã‘ã§ä½¿ãˆã‚‹
- **20å¹´ä»¥ä¸Šã®å®Ÿç¸¾**
  - ã‚¨ãƒƒã‚¸ãƒ‡ãƒã‚¤ã‚¹ã§å•é¡Œãªãå‹•ä½œ

---

# SQLiteãŒé¸ã°ã‚Œã‚‹ç†ç”±

<div class="columns">

<div>

## ğŸ¯ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹
- Cè¨€èªã§å®Ÿè£…
- OSã®APIã‚’ãƒã‚¤ãƒ†ã‚£ãƒ–å‘¼ã³å‡ºã—
- **ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã‚ˆã‚Šé«˜é€Ÿ**

</div>

<div>

## ğŸ”’ ä¿¡é ¼æ€§
- ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã ãŒ**ã‚ªãƒ¼ãƒ—ãƒ³ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ãƒˆã§ã¯ãªã„**
- äº’æ›æ€§ä¿è¨¼ï¼ˆã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã—ã¦ã‚‚å‹•ãï¼‰
- ãƒ•ãƒ«æ©Ÿèƒ½ã®SQLå®Ÿè£…

</div>

</div>

---

# SQLiteã®ç¾å®Ÿçš„ãªèª²é¡Œ âš ï¸

## ç¾ä»£ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒæ±‚ã‚ã‚‹ã‚‚ã® vs SQLite

- **åŒæ™‚æ›¸ãè¾¼ã¿ãŒã§ããªã„**
  - ä½ã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆã§ã‚‚æ›¸ãè¾¼ã¿å¤±æ•—ã®ãƒªã‚¹ã‚¯
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ä¸å‘ã**
  - å¤‰æ›´ã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚’ã‚­ãƒ£ãƒ—ãƒãƒ£ã™ã‚‹ä»•çµ„ã¿ãŒãªã„
- **åŒæœŸAPIã®ã¿**
  - ãƒ–ãƒ©ã‚¦ã‚¶ãªã©ã®ç’°å¢ƒã§ä½¿ã„ã«ãã„
- **ã‚¹ã‚­ãƒ¼ãƒé€²åŒ–ã®å›°é›£ã•**
  - ã‚«ãƒ©ãƒ å‰Šé™¤ãƒ»å‹å¤‰æ›´æ™‚ã¯ãƒ†ãƒ¼ãƒ–ãƒ«ä½œã‚Šç›´ã—

---

# Tursoã®è§£æ±ºã‚¢ãƒ—ãƒ­ãƒ¼ãƒ ğŸš€

## SQLiteã‚’**Rustã§å®Œå…¨æ›¸ãç›´ã—**

- **ğŸ”„ éåŒæœŸAPI**: ãƒ–ãƒ©ã‚¦ã‚¶ã§ã‚‚ã‚·ãƒ¼ãƒ ãƒ¬ã‚¹ã«å‹•ä½œ
- **âš¡ åŒæ™‚æ›¸ãè¾¼ã¿å¯¾å¿œ**: é«˜ã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆã‚’å®Ÿç¾
- **ğŸ¤– Native Vector Search**: å¤–éƒ¨ä¾å­˜ãªã—ã§AI/MLå¯¾å¿œ
- **ğŸŒ ã‚¯ãƒ©ã‚¦ãƒ‰ãƒã‚¤ãƒ†ã‚£ãƒ–è¨­è¨ˆ**: ã‚¨ãƒƒã‚¸åˆ†æ•£ã‚’å‰æ

> ğŸ’¡ **ã€Œåœ°çƒä¸Šã§æœ€é«˜ã®ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã€SQLiteã‚’ç¾ä»£ã«é©å¿œ**

---

# Tursoã®ä¿¡é ¼æ€§ã¸ã®å–ã‚Šçµ„ã¿ ğŸ›¡ï¸

## SQLiteã‚’è¶…ãˆã‚‹ä¿¡é ¼æ€§ã‚’ç›®æŒ‡ã™

<div class="columns">

<div>

### ğŸ”¬ æœ€å…ˆç«¯ãƒ†ã‚¹ãƒˆæ‰‹æ³•
- **Deterministic Simulation Testing (DST)**
- **Antithesis ã¨ã®ææº**
- æ•°åƒã®éšœå®³ã‚·ãƒŠãƒªã‚ªã‚’ä½“ç³»çš„ã«ãƒ†ã‚¹ãƒˆ

</div>

<div>

### ğŸ’° å“è³ªã¸ã®è‡ªä¿¡
- **$1,000 ãƒã‚°ãƒã‚¦ãƒ³ãƒ†ã‚£**
- ãƒ‡ãƒ¼ã‚¿ç ´æãƒã‚°ã‚’ç™ºè¦‹ã§å ±é…¬
- SQLiteã®ä¼èª¬çš„ä¿¡é ¼æ€§ã‚’ç¶™æ‰¿ãƒ»è¶…è¶Š

</div>

</div>

---

# Tursoã¨ã¯ï¼Ÿ ğŸŒ

## SQLiteã‚’ã‚¯ãƒ©ã‚¦ãƒ‰ãƒ»ã‚¨ãƒƒã‚¸ã§ä½¿ãˆã‚‹ã‚ˆã†ã«ã—ãŸåˆ†æ•£DB

- **SQLiteãƒ™ãƒ¼ã‚¹ã®ã‚¨ãƒƒã‚¸å‘ã‘åˆ†æ•£ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ **
- libSQLï¼ˆSQLiteã®ãƒ•ã‚©ãƒ¼ã‚¯ï¼‰ã‚’åŸºç›¤
- ã‚°ãƒ­ãƒ¼ãƒãƒ«ã«åˆ†æ•£ã—ãŸãƒ¬ãƒ—ãƒªã‚«ã§ä½é…å»¶ã‚’å®Ÿç¾
- **115äººä»¥ä¸Šã®è²¢çŒ®è€…**ã«ã‚ˆã‚‹æ´»ç™ºãªé–‹ç™º

> ğŸ’¡ **libSQL** = SQLite + ã‚¯ãƒ©ã‚¦ãƒ‰/åˆ†æ•£ç’°å¢ƒå‘ã‘æ©Ÿèƒ½

---

# Embedded Replicas ã®é­”æ³• âœ¨

## ãƒ­ãƒ¼ã‚«ãƒ«çˆ†é€Ÿ + ã‚¯ãƒ©ã‚¦ãƒ‰åŒæœŸã®ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        è‡ªå‹•åŒæœŸ        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ãƒ­ãƒ¼ã‚«ãƒ«    â”‚ â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ â”‚ Turso Cloud  â”‚
â”‚  SQLite     â”‚                      â”‚   (libSQL)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â†‘
     â”‚ èª­ã¿è¾¼ã¿: 0msï¼ˆãƒ­ãƒ¼ã‚«ãƒ«å®Œçµï¼‰
     â”‚ æ›¸ãè¾¼ã¿: ã‚¯ãƒ©ã‚¦ãƒ‰çµŒç”±ã§åŒæœŸ
     â†“
ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
```

---

# Embedded Replicasã®ãƒ¡ãƒªãƒƒãƒˆ

## **SELECTç­‰ã®èª­ã¿è¾¼ã¿ã¯å®Œå…¨ãƒ­ãƒ¼ã‚«ãƒ«å‹•ä½œ**

- ğŸš€ **é€šä¿¡å¾…ã¡ã‚¼ãƒ­ã§ã‚¯ã‚¨ãƒªçˆ†é€Ÿ**
- ğŸ“± ãƒ¢ãƒã‚¤ãƒ«ç«¯æœ«ã‚„ã‚¨ãƒƒã‚¸ãƒ‡ãƒã‚¤ã‚¹ã§ã‚‚ä½¿ãˆã‚‹
- ğŸ”„ ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã§è‡ªå‹•åŒæœŸ
- ğŸ’¾ ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ™‚ã‚‚èª­ã¿è¾¼ã¿å¯èƒ½

---

# Turso CLIã§ç°¡å˜ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```bash
# ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
brew install tursodatabase/tap/turso

# ã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ— & ãƒ­ã‚°ã‚¤ãƒ³
turso auth signup
turso auth login

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ä½œæˆ
turso db create my-edge-db

# SQLite CLIã§ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«æ¥ç¶š
turso db shell my-edge-db
```

> ğŸ’¡ ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚ˆã‚Š**CLIãƒ¡ã‚¤ãƒ³**ã®è¨­è¨ˆæ€æƒ³

---

# Pythonã‹ã‚‰Tursoã‚’ä½¿ã† ğŸ

```python
import libsql
import os

# Embedded Replicasï¼ˆãƒ­ãƒ¼ã‚«ãƒ« + ã‚¯ãƒ©ã‚¦ãƒ‰åŒæœŸï¼‰
url = os.getenv("TURSO_DATABASE_URL")
auth_token = os.getenv("TURSO_AUTH_TOKEN")

conn = libsql.connect("hello.db", 
                     sync_url=url, 
                     auth_token=auth_token)

# ãƒ­ãƒ¼ã‚«ãƒ«ã§é«˜é€Ÿèª­ã¿è¾¼ã¿
conn.execute("SELECT * FROM users").fetchall()

# ã‚¯ãƒ©ã‚¦ãƒ‰ã¨åŒæœŸ
conn.sync()
```

---

# Native Vector Searchå¯¾å¿œ ğŸ”

## 2024å¹´6æœˆã‹ã‚‰ãƒ™ã‚¯ãƒˆãƒ«æ¤œç´¢ã‚’ãƒã‚¤ãƒ†ã‚£ãƒ–ã‚µãƒãƒ¼ãƒˆï¼

**AI/MLã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒå¤–éƒ¨ä¾å­˜ãªã—ã§å®Ÿç¾å¯èƒ½**

```sql
-- ãƒ™ã‚¯ãƒˆãƒ«ã‚«ãƒ©ãƒ ã‚’å®šç¾©ï¼ˆæ‹¡å¼µæ©Ÿèƒ½ä¸è¦ï¼ï¼‰
CREATE TABLE movies (
  title TEXT,
  embedding F32_BLOB(3)  -- 3æ¬¡å…ƒã®float32é…åˆ—
);

-- ãƒ™ã‚¯ãƒˆãƒ«ãƒ‡ãƒ¼ã‚¿ã®æŒ¿å…¥
INSERT INTO movies VALUES 
  ('Gladiator', vector('[7,8,9]'));

-- ã‚³ã‚µã‚¤ãƒ³é¡ä¼¼åº¦ã§æ¤œç´¢
SELECT title FROM movies
ORDER BY vector_distance_cos(embedding, '[5,6,7]')
LIMIT 3;
```

---

# é«˜é€ŸåŒ–ã®ãŸã‚ã®ANNã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹

```sql
-- ANNã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®ä½œæˆï¼ˆDiskANNã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ï¼‰
CREATE INDEX movies_idx ON movies(
  libsql_vector_idx(embedding)
);

-- é«˜é€Ÿãƒ™ã‚¯ãƒˆãƒ«æ¤œç´¢
SELECT title FROM 
  vector_top_k('movies_idx', '[4,5,6]', 3)
JOIN movies ON movies.rowid = id;
```

> ğŸ’¡ å¤§è¦æ¨¡ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã§ã‚‚é«˜é€Ÿæ¤œç´¢å¯èƒ½

---

# æ—¢å­˜SQLiteã‹ã‚‰ã®ç§»è¡Œã‚‚ç°¡å˜

```bash
# SQLiteãƒ•ã‚¡ã‚¤ãƒ«ã®æº–å‚™
sqlite3 my-database.db
> PRAGMA journal_mode=WAL;
> PRAGMA wal_checkpoint(truncate);
> .exit

# Tursoã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆï¼ˆä¸€ç™ºï¼ï¼‰
turso db import ~/path/to/my-database.db

# æ—¢å­˜ã‚°ãƒ«ãƒ¼ãƒ—ã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆã™ã‚‹å ´åˆ
turso db import --group production ~/path/to/my-database.db
```

---

# å®Ÿç”¨äº‹ä¾‹: Spice.ai ğŸŒŸ

## AIãƒ‡ãƒ¼ã‚¿æ¨è«–ã‚¨ãƒ³ã‚¸ãƒ³ã§ã®æ¡ç”¨

- **Spice.ai**: SQLite/DuckDBã‚’ã‚¢ã‚¯ã‚»ãƒ©ãƒ¬ãƒ¼ã‚¿ãƒ¼ã¨ã—ã¦ä½¿ç”¨
- **Tursoæ¡ç”¨ã®ç†ç”±**:
  - ä¸€éƒ¨ã‚¯ã‚¨ãƒªã§SQLiteã‚ˆã‚Šé«˜æ€§èƒ½
  - åŒæ™‚æ›¸ãè¾¼ã¿å¯¾å¿œã§ã•ã‚‰ãªã‚‹æ€§èƒ½å‘ä¸Šã‚’æœŸå¾…
- **ã‚¨ãƒƒã‚¸ã§ã®AIæ¨è«–**ãŒç¾å®Ÿã«

> ğŸ’¡ è»½é‡DBã¸ã®ãƒ¯ãƒ¼ã‚¯ãƒ­ãƒ¼ãƒ‰ã‚·ãƒ•ãƒˆãŒåŠ é€Ÿä¸­

---

# ã¾ã¨ã‚

## Tursoã§å®Ÿç¾ã§ãã‚‹ã“ã¨

- âœ… **SQLiteã®èª²é¡Œã‚’è§£æ±º**
  - åŒæ™‚æ›¸ãè¾¼ã¿ãƒ»éåŒæœŸAPIãƒ»ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å¯¾å¿œ
- âœ… **ã‚¨ãƒƒã‚¸ã§ã®çˆ†é€Ÿãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**
  - ãƒ­ãƒ¼ã‚«ãƒ«èª­ã¿è¾¼ã¿ã§é…å»¶ã‚¼ãƒ­
- âœ… **ã‚°ãƒ­ãƒ¼ãƒãƒ«åˆ†æ•£ã¨ãƒ­ãƒ¼ã‚«ãƒ«æ€§èƒ½ã®ä¸¡ç«‹**
  - Embedded Replicasã«ã‚ˆã‚‹ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰æ§‹æˆ
- âœ… **ãƒ¢ãƒ€ãƒ³ãªæ©Ÿèƒ½ã‚’SQLiteã§**
  - Native Vector Searchå¯¾å¿œ
- âœ… **ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£**
  - 115äººä»¥ä¸Šã®è²¢çŒ®è€…ãŒå‚åŠ å¯èƒ½

---

# å‚è€ƒè³‡æ–™ ğŸ“š

- [Tursoå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://docs.turso.tech/)
- [libSQL GitHub](https://github.com/libsql/libsql)
- [Embedded Replicasè§£èª¬](https://docs.turso.tech/features/embedded-replicas/introduction)
- [Native Vector Search](https://turso.tech/blog/turso-brings-native-vector-search-to-sqlite)
- [SQLAlchemy + Tursoé€£æº](https://docs.turso.tech/sdk/python/orm/sqlalchemy)

---

# ã”æ¸…è´ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸï¼ ğŸ‰

## Questions?

**Turso + SQLite**ã§
ã‚¨ãƒƒã‚¸ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°æ™‚ä»£ã®
ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½“é¨“ã—ã‚ˆã†ï¼

GitHub: [@your-github]
Twitter: [@your-twitter]
