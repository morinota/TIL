# 「モジュール」と「パッケージ」と「名前空間」

本題に入る前に、「モジュール」と「パッケージ」、「名前空間」について簡単に。

- 「モジュール (Module)」

  - ファイル単位で分けてプログラムを記載したもの。
  - わかりにくければ、一つの foo.py という Python プログラムファイルが一つの「モジュール」と考えればよいでしょう
  - (これを「pure Python モジュール」と呼ぶみたい)。

- 「パッケージ (Package)」

  - 複数のファイル、ディレクトリ構造からなり、ルールに従ってそれらをひと固まりにしたもの。

- 「名前空間 (Namespace)」
  - 「モジュール」や「パッケージ」(およびその中)で 使用する「名前」が衝突しないように、使用する名前の空間を分けたもの。
  - 階層構造で構成される。

```python:名前空間の例
import alpha.bravo.charlie

alpha.bravo.charlie.delta()
```

この例 (例1) では、alpha → bravo → charlie という階層構造の名前空間になっており、その charlie の中で実装された delta() という手続き (関数) を呼び出している。

上位の名前空間が異なれば、下位の名前空間で名前が同じであっても、異なるアイテムである、ということは直感的にわかる。

# モジュールと階層構造

## 単一ファイルのモジュール

## ディレクトリによる階層構造と名前空間

次の様なディレクトリ、ファイル構成を考える。

```text:サンプル2 階層構造
./
├─ sample0020.py ..... 実行ファイル
└─ dir/
    └─ module02.py ... モジュール
```

## ディレクトリと名前空間のマッピング

サンプル2 では、module02 を呼び出すのに、dir/ というディレクトリがあるために、dir.module02 という名前空間で参照する必要がありました。
dir が邪魔ですね。実体がないのに、名前空間の階層として指定しなければなりません。

そこで登場するのが、`__init__.py`。
ディレクトリ階層にした上で、直接、module02 という名前で呼び出す方法が `__init__.py` です。

`dir/ `の代わりに` module02/ `というディレクトリ名にすればよいのですが、呼び出すファイルは、結局` module02.なにがし.hello()` とせざるを得ません。そこで、 `__init__.py` というファイルに特別な意味をもたせ、ディレクトリ名と同じ名前空間のモジュールとして扱えるようになっています。

つまり、`dir/module02.py`の代わりに `module02/__init__.py` の中にプログラムを書くことで、`module02 `として呼び出せるようになります。

```text:サンプル3 __init__.pyを含む階層構造
./
├─ sample0030.py ..... 実行ファイル
└─ module02/
    └─ __init__.py ... "module02" の実体
```

```python:sample0030.py
import module02
module02.hello()
```

# **init**.pyの役割

## モジュール検索の為のマーカー

## 名前空間の初期化

## ワイルドカードimport の対象の定義(**all**の定義)

## 同じディレクトリにある他のモジュールの名前空間の定義

# 参考

- https://qiita.com/msi/items/d91ea3900373ff8b09d7
